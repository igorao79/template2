(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1126:()=>{},1444:e=>{e.exports={cart__overlay:"CartModal_cart__overlay__DHjx1",cart__modal:"CartModal_cart__modal__wh8Ui",cart__modal_content:"CartModal_cart__modal_content__PdzQv",cart__header:"CartModal_cart__header__sUQBF",cart__header_icon:"CartModal_cart__header_icon__bIYYY",cart__title:"CartModal_cart__title__xv7tF",cart__steps:"CartModal_cart__steps__D_zLi",cart__step_indicator:"CartModal_cart__step_indicator__cjQnc",cart__step_indicator_active:"CartModal_cart__step_indicator_active__iBeYp",cart__step_number:"CartModal_cart__step_number__2cqrY",cart__close:"CartModal_cart__close__p171P",cart__content:"CartModal_cart__content__HoEuL",cart__content_success:"CartModal_cart__content_success__3L3BW",cart__step1:"CartModal_cart__step1__CEkY8",cart__items_list:"CartModal_cart__items_list__XQffm",cart__product_row:"CartModal_cart__product_row__TICvx",cart__product_icon:"CartModal_cart__product_icon__x7lDS",cart__product_info:"CartModal_cart__product_info__x6fM3",cart__product_name:"CartModal_cart__product_name__E6tji",cart__product_price:"CartModal_cart__product_price__bkJHh",cart__counter:"CartModal_cart__counter__iDfYy",cart__counter_btn:"CartModal_cart__counter_btn__8ttoe",cart__counter_value:"CartModal_cart__counter_value__jUtmr",cart__product_total:"CartModal_cart__product_total__pFbM5",cart__product_remove:"CartModal_cart__product_remove__YQB0A",cart__empty:"CartModal_cart__empty__xqFyT",cart__empty_icon:"CartModal_cart__empty_icon__2fToN",cart__empty_btn:"CartModal_cart__empty_btn__Gnk5h",cart__step2:"CartModal_cart__step2__rsiLL",cart__form_container:"CartModal_cart__form_container__L5P5K",cart__swipe_hint:"CartModal_cart__swipe_hint__ojHHx",cart__form_group:"CartModal_cart__form_group__P_1FG",cart__form_label:"CartModal_cart__form_label__LAJUh",cart__form_icon:"CartModal_cart__form_icon__j2YhL",cart__form_input:"CartModal_cart__form_input__oQuq_",cart__form_input_error:"CartModal_cart__form_input_error__3rO5B",cart__error_message:"CartModal_cart__error_message__GZA_7",cart__date_picker:"CartModal_cart__date_picker__xNEFh",cart__date_option:"CartModal_cart__date_option__t7KDZ",cart__date_option_selected:"CartModal_cart__date_option_selected__kFv1h",cart__date_option_disabled:"CartModal_cart__date_option_disabled__3Hqdj",cart__payment_methods:"CartModal_cart__payment_methods__us2XR",cart__payment_option:"CartModal_cart__payment_option__6vmkX",cart__payment_option_selected:"CartModal_cart__payment_option_selected___k2HO",cart__payment_icon:"CartModal_cart__payment_icon__8Uond",cart__step3:"CartModal_cart__step3__k35cS",cart__success_animation:"CartModal_cart__success_animation__Jj99r",cart__success_title:"CartModal_cart__success_title__GBHmt",cart__success_message:"CartModal_cart__success_message__Gtzxf",cart__success_btn:"CartModal_cart__success_btn__zZUkl",cart__footer:"CartModal_cart__footer__i972g",cart__back_btn:"CartModal_cart__back_btn__V4xie",cart__next_btn:"CartModal_cart__next_btn__CiXKO",cart__btn_icon:"CartModal_cart__btn_icon__G1UjZ"}},2724:e=>{e.exports={main:"MainLayout_main__SDHsE",hidden:"MainLayout_hidden__PoPnz"}},3738:e=>{e.exports={header:"Header_header__FHC0C","header--scrolled":"Header_header--scrolled___MJOt","header--transparent":"Header_header--transparent__VtNcN",header__container:"Header_header__container__lSRFK",header__logo:"Header_header__logo__doLJu","header__logo-accent":"Header_header__logo-accent__N2_IG",header__nav:"Header_header__nav__M_HYT","header__nav-list":"Header_header__nav-list__9vsSg","header__nav-item":"Header_header__nav-item__6sd5_","header__nav-item--scrolled":"Header_header__nav-item--scrolled__2iCr7","header__nav-item--transparent":"Header_header__nav-item--transparent__aI_r4","header__nav-item--active":"Header_header__nav-item--active__drVi2",header__cart:"Header_header__cart__lRdVq",header__cart_badge:"Header_header__cart_badge__XGVtR","header__mobile-button":"Header_header__mobile-button__Fbt7C","header__mobile-menu":"Header_header__mobile-menu__HDH95","header__mobile-list":"Header_header__mobile-list__9VDql","header__mobile-item":"Header_header__mobile-item__Xgdyc","header__mobile-item--active":"Header_header__mobile-item--active__a4j9W",header__mobile_cart_btn:"Header_header__mobile_cart_btn__P62wK",header__mobile_cart_icon:"Header_header__mobile_cart_icon__tUK2v",header__mobile_cart_badge:"Header_header__mobile_cart_badge__IrbPu",header__mobile_controls:"Header_header__mobile_controls__b8Nim"}},4094:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(5155),_=a(2115),c=a(7650),s=a(760),o=a(4105),n=a(4096),i=a.n(n);let l=e=>{let{isOpen:t,onClose:a,children:n,lockScroll:l=!0}=e,[d,m]=(0,_.useState)(!1),h=(0,_.useRef)(null);return((0,_.useEffect)(()=>(m(!0),l&&t&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[t,l]),(0,_.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()},r=e=>{h.current===e.target&&t&&a()};return document.addEventListener("keydown",e),document.addEventListener("mousedown",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("mousedown",r)}},[t,a]),d&&"undefined"!=typeof document)?(0,c.createPortal)((0,r.jsx)(s.N,{mode:"wait",children:t&&(0,r.jsxs)("div",{className:i().modalContainer,children:[(0,r.jsx)(o.P.div,{ref:h,className:i().overlay,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}}}),(0,r.jsx)(o.P.div,{className:i().modal,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,scale:.8,y:-20},visible:{opacity:1,scale:1,y:0,transition:{duration:.3}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.2}}},children:n})]})}),document.body):null}},4096:e=>{e.exports={modalContainer:"ModalPortal_modalContainer__rs2rm",overlay:"ModalPortal_overlay__lrZjt",modal:"ModalPortal_modal__3ss_v"}},5402:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(5155),_=a(2115),c=a(9911),s=a(3738),o=a.n(s),n=a(9732);let i=()=>{let[e,t]=(0,_.useState)(!1),[a,s]=(0,_.useState)(0),[i,l]=(0,_.useState)(!1),[d,m]=(0,_.useState)("home"),{openCart:h,totalQuantity:u}=(0,n._)(),p=(0,_.useCallback)(()=>{let e=window.scrollY;e>50?t(!0):t(!1),s(e)},[]);(0,_.useEffect)(()=>(p(),window.addEventListener("scroll",p,{passive:!0}),()=>window.removeEventListener("scroll",p)),[p]);let x=(e,t)=>{e.preventDefault();let a=document.getElementById(t);if(a){let e=document.querySelector("header"),r=e?e.offsetHeight:0,_=a.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:_-r,behavior:"smooth"}),m(t)}i&&l(!1)},f=[{href:"#home",id:"home",label:"Главная"},{href:"#animals",id:"animals",label:"Животные"},{href:"#tickets",id:"tickets",label:"Билеты"},{href:"#events",id:"events",label:"События"},{href:"#location",id:"location",label:"Как добраться"}];return(0,r.jsx)("header",{className:"".concat(o().header," ").concat(e?o()["header--scrolled"]:o()["header--transparent"]),children:(0,r.jsxs)("div",{className:o().header__container,children:[(0,r.jsxs)("a",{href:"#home",onClick:e=>x(e,"home"),className:o().header__logo,children:["Зоопарк",(0,r.jsx)("span",{className:o()["header__logo-accent"],children:"."})]}),(0,r.jsx)("nav",{className:o().header__nav,children:(0,r.jsx)("ul",{className:o()["header__nav-list"],children:f.map(t=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:t.href,onClick:e=>x(e,t.id),className:"\n                    ".concat(o()["header__nav-item"]," \n                    ").concat(e?o()["header__nav-item--scrolled"]:o()["header__nav-item--transparent"],"\n                    ").concat(d===t.id?o()["header__nav-item--active"]:"","\n                  "),children:t.label})},t.href))})}),(0,r.jsxs)("div",{className:o().header__mobile_controls,children:[(0,r.jsxs)("button",{className:o().header__cart,onClick:h,children:[(0,r.jsx)(c.AsH,{}),u>0&&(0,r.jsx)("span",{className:o().header__cart_badge,children:u})]}),(0,r.jsx)("button",{className:o()["header__mobile-button"],onClick:()=>l(!i),"aria-label":"Открыть меню",children:i?(0,r.jsx)(c.QCr,{}):(0,r.jsx)(c.OXb,{})})]}),i&&(0,r.jsx)("div",{className:o()["header__mobile-menu"],children:(0,r.jsxs)("ul",{className:o()["header__mobile-list"],children:[f.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.href,onClick:t=>x(t,e.id),className:"\n                      ".concat(o()["header__mobile-item"],"\n                      ").concat(d===e.id?o()["header__mobile-item--active"]:"","\n                    "),children:e.label})},e.href)),(0,r.jsx)("li",{children:(0,r.jsxs)("button",{className:o().header__mobile_cart_btn,onClick:()=>{h(),l(!1)},children:[(0,r.jsx)(c.AsH,{className:o().header__mobile_cart_icon}),"Корзина",u>0&&(0,r.jsx)("span",{className:o().header__mobile_cart_badge,children:u})]})})]})})]})})}},5694:(e,t,a)=>{"use strict";a.d(t,{S:()=>s,s:()=>o});var r=a(5155),_=a(2115);let c=(0,_.createContext)({canAnimate:!1,isLoading:!0,hasScrolled:!1});function s(e){let{children:t}=e,[a,s]=(0,_.useState)(!0),[o,n]=(0,_.useState)(!1),[i,l]=(0,_.useState)(!1),d=(0,_.useRef)(!0);return(0,_.useEffect)(()=>{l(window.scrollY>0);let e=()=>{l(!0)};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[]),(0,_.useEffect)(()=>{if(d.current){d.current=!1;let e=setTimeout(()=>{s(!1),setTimeout(()=>{n(!0)},800)},2500);return()=>clearTimeout(e)}},[]),(0,r.jsx)(c.Provider,{value:{canAnimate:o,isLoading:a,hasScrolled:i},children:t})}function o(){let e=(0,_.useContext)(c);if(void 0===e)throw Error("useAnimation must be used within an AnimationProvider");return e}},7192:e=>{e.exports={loadingScreen:"LoadingScreen_loadingScreen__sB9qb",fadeOut:"LoadingScreen_fadeOut__TUJa2",content:"LoadingScreen_content__pLZQe",slideIn:"LoadingScreen_slideIn__65_dU",logo:"LoadingScreen_logo__L_DR1",text:"LoadingScreen_text__NW8oY",dot:"LoadingScreen_dot__ynpgN",pulse:"LoadingScreen_pulse__Z1_Ya",dots:"LoadingScreen_dots__gIrQx",bounce:"LoadingScreen_bounce__BWszj"}},7255:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2479,23)),Promise.resolve().then(a.bind(a,5402)),Promise.resolve().then(a.bind(a,7458)),Promise.resolve().then(a.t.bind(a,1126,23))},7458:(e,t,a)=>{"use strict";a.d(t,{default:()=>w});var r=a(5155),_=a(9732),c=a(5694),s=a(5402),o=a(6874),n=a.n(o),i=a(9911),l=a(4105),d=a(9984),m=a.n(d);let h=()=>{let e=new Date().getFullYear(),t={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return(0,r.jsx)("footer",{className:m().footer,children:(0,r.jsxs)("div",{className:m().footer__container,children:[(0,r.jsxs)(l.P.div,{className:m().footer__grid,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},children:[(0,r.jsxs)(l.P.div,{variants:t,children:[(0,r.jsx)("h3",{className:m()["footer__column-title"],children:"Зоопарк"}),(0,r.jsx)("p",{className:m()["footer__column-text"],children:"Почувствуйте магию дикой природы в уникальной и интерактивной среде. Наша миссия - обучать, сохранять и вдохновлять."}),(0,r.jsxs)("div",{className:m().footer__social,children:[(0,r.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:(0,r.jsx)(i.iYk,{className:m()["footer__social-link"]})}),(0,r.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:(0,r.jsx)(i.feZ,{className:m()["footer__social-link"]})}),(0,r.jsx)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:(0,r.jsx)(i.ao$,{className:m()["footer__social-link"]})}),(0,r.jsx)("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",children:(0,r.jsx)(i.Vk6,{className:m()["footer__social-link"]})})]})]}),(0,r.jsxs)(l.P.div,{variants:t,children:[(0,r.jsx)("h3",{className:m()["footer__column-title"],children:"Разделы"}),(0,r.jsxs)("ul",{className:m()["footer__links-list"],children:[(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/",className:m()["footer__links-item"],children:"Главная"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/animals",className:m()["footer__links-item"],children:"Животные"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/tickets",className:m()["footer__links-item"],children:"Билеты"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/events",className:m()["footer__links-item"],children:"События"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/location",className:m()["footer__links-item"],children:"Как добраться"})})]})]}),(0,r.jsxs)(l.P.div,{variants:t,children:[(0,r.jsx)("h3",{className:m()["footer__column-title"],children:"Часы работы"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{className:m()["footer__hours-item"],children:[(0,r.jsx)("span",{children:"Понедельник - Пятница:"}),(0,r.jsx)("span",{children:"9:00 - 18:00"})]}),(0,r.jsxs)("li",{className:m()["footer__hours-item"],children:[(0,r.jsx)("span",{children:"Суббота:"}),(0,r.jsx)("span",{children:"9:00 - 19:00"})]}),(0,r.jsxs)("li",{className:m()["footer__hours-item"],children:[(0,r.jsx)("span",{children:"Воскресенье:"}),(0,r.jsx)("span",{children:"10:00 - 19:00"})]}),(0,r.jsx)("li",{className:m()["footer__hours-note"],children:(0,r.jsx)("span",{children:"* Последний вход за 1 час до закрытия"})})]})]}),(0,r.jsxs)(l.P.div,{variants:t,children:[(0,r.jsx)("h3",{className:m()["footer__column-title"],children:"Контакты"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{className:m()["footer__contact-item"],children:[(0,r.jsx)(i.vq8,{className:m()["footer__contact-item-icon"]}),(0,r.jsx)("span",{children:"ул. Зоологическая, 123, г. Москва, 123456"})]}),(0,r.jsxs)("li",{className:m()["footer__contact-item"],children:[(0,r.jsx)(i.Cab,{className:m()["footer__contact-item-icon"]}),(0,r.jsx)("span",{children:"+7 (123) 456-7890"})]}),(0,r.jsxs)("li",{className:m()["footer__contact-item"],children:[(0,r.jsx)(i.maD,{className:m()["footer__contact-item-icon"]}),(0,r.jsx)("span",{children:"info@zoopark.ru"})]})]})]})]}),(0,r.jsx)(l.P.div,{className:m().footer__copyright,initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.5},children:(0,r.jsxs)("p",{children:["\xa9 ",e," Зоопарк. Все права защищены."]})})]})})};var u=a(2724),p=a.n(u),x=a(2115),f=a(760),j=a(1444),v=a.n(j),b=a(9521),y=a(4094);let N={email:"",emailError:"",selectedDate:null,dateError:"",paymentMethod:null,paymentError:"",disabledDates:[]};function g(e,t){switch(t.type){case"SET_EMAIL":return{...e,email:t.payload,emailError:""};case"SET_EMAIL_ERROR":return{...e,emailError:t.payload};case"SET_SELECTED_DATE":return{...e,selectedDate:t.payload,dateError:""};case"SET_DATE_ERROR":return{...e,dateError:t.payload};case"SET_PAYMENT_METHOD":return{...e,paymentMethod:t.payload,paymentError:""};case"SET_PAYMENT_ERROR":return{...e,paymentError:t.payload};case"SET_DISABLED_DATES":return{...e,disabledDates:t.payload};case"RESET_FORM":return N;case"INITIALIZE_FORM":return{...e,...t.payload};default:return e}}let C=()=>{let{cartItems:e,orderInfo:t,isCartOpen:a,checkoutStep:c,removeFromCart:s,updateQuantity:o,closeCart:n,setOrderInfo:d,nextStep:m,prevStep:h,resetCheckout:u,totalPrice:p,clearCart:j}=(0,_._)(),[C,E]=(0,x.useReducer)(g,N),[M,k]=(0,x.useState)(window.innerWidth);(0,x.useEffect)(()=>{t&&E({type:"INITIALIZE_FORM",payload:{email:t.email||"",selectedDate:t.date,paymentMethod:t.paymentMethod}})},[t]),(0,x.useEffect)(()=>{console.log("CartModal: Количество элементов в корзине:",e.length),console.log("CartModal: Общая сумма:",p)},[e,p,a]),(0,x.useEffect)(()=>{let e=new Date,t=new Date(e);t.setDate(e.getDate()+14);let a=[],r=new Date(t);for(let e=0;e<30;e++)r.setDate(r.getDate()+1),a.push(new Date(r));E({type:"SET_DISABLED_DATES",payload:a})},[]),(0,x.useEffect)(()=>{let e=()=>{k(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let S=e=>{E({type:"SET_SELECTED_DATE",payload:e})},w=e=>{E({type:"SET_PAYMENT_METHOD",payload:e})},D=e=>e.toLocaleDateString("ru-RU",{day:"numeric",month:"long",weekday:"short"}),T=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(e),L={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},H={enter:e=>{let t=M<=768;return{position:"absolute",x:t?0:e>0?"100%":"-100%",opacity:.2,scale:.95,rotateY:t?0:e>0?"7deg":"-7deg"}},center:{position:"relative",x:0,opacity:1,scale:1,rotateY:0,transition:{type:"tween",duration:.4,ease:[.16,1,.3,1]}},exit:e=>{let t=M<=768;return{position:"absolute",x:t?0:e<0?"100%":"-100%",opacity:.2,scale:.95,rotateY:t?0:e<0?"7deg":"-7deg",transition:{type:"tween",duration:.4,ease:[.16,1,.3,1]}}}},P=()=>c<F.current?-1:1,F=(0,x.useRef)(c);(0,x.useEffect)(()=>{F.current=c},[c]);let R=e=>{switch(e){case"user":return(0,r.jsx)(i.x$1,{});case"child":return(0,r.jsx)(i.U6x,{});case"userTie":return(0,r.jsx)(i.p7b,{});default:return(0,r.jsx)(i.tVd,{})}};return(0,r.jsxs)(y.A,{isOpen:a,onClose:n,children:[(0,r.jsx)("div",{className:v().cart__overlay,onClick:n}),(0,r.jsx)("div",{className:v().cart__modal,children:(0,r.jsxs)("div",{className:v().cart__modal_content,children:[(0,r.jsxs)("div",{className:v().cart__header,children:[1===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.AsH,{className:v().cart__header_icon}),(0,r.jsx)("h2",{className:v().cart__title,children:"Корзина"})]}),2===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.bfZ,{className:v().cart__header_icon}),(0,r.jsx)("h2",{className:v().cart__title,children:"Оформление заказа"})]}),3===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.CMH,{className:v().cart__header_icon}),(0,r.jsx)("h2",{className:v().cart__title,children:"Заказ оформлен"})]}),(0,r.jsx)("div",{className:v().cart__steps,children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"".concat(v().cart__step_indicator," ").concat(c>=e?v().cart__step_indicator_active:""),children:[(0,r.jsx)("span",{className:v().cart__step_number,children:e}),(0,r.jsx)("span",{className:v().cart__step_name,children:1===e?"Корзина":2===e?"Оформление":"Готово"})]},e))}),(0,r.jsx)("button",{className:v().cart__close,onClick:n,children:(0,r.jsx)(i.QCr,{})})]}),(0,r.jsx)("div",{className:"".concat(v().cart__content," ").concat(3===c?v().cart__content_success:""),children:(0,r.jsxs)(f.N,{mode:"wait",initial:!1,children:[1===c&&(0,r.jsx)(l.P.div,{className:v().cart__step1,initial:"enter",animate:"center",exit:"exit",variants:H,custom:P(),children:e&&e.length>0?(0,r.jsx)("div",{className:v().cart__items_list,children:e.map(e=>(0,r.jsxs)("div",{className:v().cart__product_row,children:[(0,r.jsx)("div",{className:v().cart__product_icon,children:R(e.ticket.iconType)}),(0,r.jsxs)("div",{className:v().cart__product_info,children:[(0,r.jsx)("div",{className:v().cart__product_name,children:e.ticket.name}),(0,r.jsxs)("div",{className:v().cart__product_price,children:[T(e.ticket.price)," / шт."]})]}),(0,r.jsxs)("div",{className:v().cart__counter,children:[(0,r.jsx)("button",{className:v().cart__counter_btn,onClick:()=>o(e.ticket.id,e.quantity-1),"aria-label":"Уменьшить количество",children:"-"}),(0,r.jsx)("div",{className:v().cart__counter_value,children:e.quantity}),(0,r.jsx)("button",{className:v().cart__counter_btn,onClick:()=>o(e.ticket.id,e.quantity+1),"aria-label":"Увеличить количество",children:"+"})]}),(0,r.jsx)("div",{className:v().cart__product_total,children:T(e.ticket.price*e.quantity)}),(0,r.jsx)("button",{className:v().cart__product_remove,onClick:()=>s(e.ticket.id),"aria-label":"Удалить из корзины",children:(0,r.jsx)(i.qbC,{})})]},e.ticket.id))}):(0,r.jsxs)("div",{className:v().cart__empty,children:[(0,r.jsx)(i.AsH,{className:v().cart__empty_icon}),(0,r.jsx)("p",{children:"Ваша корзина пуста"}),(0,r.jsx)("button",{className:v().cart__empty_btn,onClick:n,children:"Продолжить покупки"})]})},"cart-step"),2===c&&(0,r.jsx)(l.P.div,{className:v().cart__step2,initial:"enter",animate:"center",exit:"exit",variants:H,custom:P(),children:(0,r.jsxs)(l.P.div,{className:v().cart__form_container,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},children:[(0,r.jsxs)(l.P.div,{className:v().cart__form_group,variants:L,children:[(0,r.jsxs)("label",{htmlFor:"email",className:v().cart__form_label,children:[(0,r.jsx)(i.maD,{className:v().cart__form_icon})," Email для получения билетов"]}),(0,r.jsx)("input",{id:"email",type:"email",className:"".concat(v().cart__form_input," ").concat(C.emailError?v().cart__form_input_error:""),placeholder:"example@example.com",value:C.email,onChange:e=>{E({type:"SET_EMAIL",payload:e.target.value})}}),C.emailError&&(0,r.jsx)("p",{className:v().cart__error_message,children:C.emailError})]}),(0,r.jsxs)(l.P.div,{className:v().cart__form_group,variants:L,children:[(0,r.jsxs)("label",{className:v().cart__form_label,children:[(0,r.jsx)(i.bfZ,{className:v().cart__form_icon})," Дата посещения (в течение двух недель)"]}),(0,r.jsxs)("div",{className:v().cart__date_picker,children:[(()=>{let e=[],t=new Date;for(let a=1;a<=14;a++){let r=new Date(t);r.setDate(t.getDate()+a),e.push(r)}return e})().map(e=>(0,r.jsx)("button",{type:"button",className:"".concat(v().cart__date_option," ").concat(C.selectedDate&&e.toDateString()===C.selectedDate.toDateString()?v().cart__date_option_selected:""),onClick:()=>S(e),children:D(e)},e.toISOString())),C.disabledDates.slice(0,5).map(e=>(0,r.jsx)("button",{type:"button",className:"".concat(v().cart__date_option," ").concat(v().cart__date_option_disabled),disabled:!0,children:D(e)},e.toISOString()))]}),C.dateError&&(0,r.jsx)("p",{className:v().cart__error_message,children:C.dateError})]}),(0,r.jsxs)(l.P.div,{className:v().cart__form_group,variants:L,children:[(0,r.jsxs)("label",{className:v().cart__form_label,children:[(0,r.jsx)(i.MxO,{className:v().cart__form_icon})," Способ оплаты"]}),(0,r.jsxs)("div",{className:v().cart__payment_methods,children:[(0,r.jsxs)("button",{type:"button",className:"".concat(v().cart__payment_option," ").concat("card"===C.paymentMethod?v().cart__payment_option_selected:""),onClick:()=>w("card"),children:[(0,r.jsx)(i.x1c,{className:v().cart__payment_icon}),(0,r.jsx)("span",{children:"Банковская карта"})]}),(0,r.jsxs)("button",{type:"button",className:"".concat(v().cart__payment_option," ").concat("paypal"===C.paymentMethod?v().cart__payment_option_selected:""),onClick:()=>w("paypal"),children:[(0,r.jsx)(i.SnG,{className:v().cart__payment_icon}),(0,r.jsx)("span",{children:"PayPal"})]}),(0,r.jsxs)("button",{type:"button",className:"".concat(v().cart__payment_option," ").concat("applepay"===C.paymentMethod?v().cart__payment_option_selected:""),onClick:()=>w("applepay"),children:[(0,r.jsx)(i.eMv,{className:v().cart__payment_icon}),(0,r.jsx)("span",{children:"Apple Pay"})]})]}),C.paymentError&&(0,r.jsx)("p",{className:v().cart__error_message,children:C.paymentError})]})]})},"checkout-step"),3===c&&(0,r.jsxs)(l.P.div,{className:v().cart__step3,initial:"enter",animate:"center",exit:"exit",variants:H,custom:P(),children:[(0,r.jsx)("div",{className:v().cart__success_animation,children:(0,r.jsx)(b.Ii,{src:"/monkey.lottie",autoplay:!0,loop:!0})}),(0,r.jsx)("h3",{className:v().cart__success_title,children:"Спасибо за покупку!"}),(0,r.jsxs)("p",{className:v().cart__success_message,children:["Ваши билеты направлены на указанную почту ",(0,r.jsx)("strong",{children:C.email}),". Ждем вас!"]}),(0,r.jsxs)("button",{className:v().cart__success_btn,onClick:()=>{j(),setTimeout(()=>{n(),u(),E({type:"RESET_FORM"})},3e3)},children:[(0,r.jsx)(i.CMH,{}),"Готово"]})]},"success-step")]})}),(0,r.jsx)("div",{className:v().cart__footer,children:c<3&&(0,r.jsxs)(r.Fragment,{children:[c>1&&(0,r.jsxs)("button",{className:v().cart__back_btn,onClick:h,children:[(0,r.jsx)(i.QVr,{className:v().cart__btn_icon}),"Назад"]}),(0,r.jsxs)("button",{className:v().cart__next_btn,onClick:()=>{if(1===c)0!==e.length&&m();else if(2===c){let e=!1;if(C.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C.email)||(E({type:"SET_EMAIL_ERROR",payload:"Пожалуйста, введите корректный email"}),e=!0),C.selectedDate||(E({type:"SET_DATE_ERROR",payload:"Пожалуйста, выберите дату посещения"}),e=!0),C.paymentMethod||(E({type:"SET_PAYMENT_ERROR",payload:"Пожалуйста, выберите способ оплаты"}),e=!0),e)return;d({email:C.email,date:C.selectedDate,paymentMethod:C.paymentMethod}),m()}},disabled:0===e.length&&1===c,children:[1===c?"Оформить заказ":"Оплатить",(0,r.jsx)(i.Z0P,{className:v().cart__btn_icon})]})]})})]})})]})},E=e=>{let{children:t}=e,{isLoading:a}=(0,c.s)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("main",{className:"".concat(p().main," ").concat(a?p().hidden:""),children:t}),(0,r.jsx)(C,{})]})};var M=a(7192),k=a.n(M);function S(){let e=(0,x.useRef)(null),{isLoading:t}=(0,c.s)();return(0,x.useEffect)(()=>{if(document.body.style.opacity="1",!t&&e.current){e.current.classList.add(k().fadeOut);let t=setTimeout(()=>{var t;null==(t=e.current)||t.remove()},800);return()=>clearTimeout(t)}},[t]),(0,r.jsx)("div",{ref:e,className:k().loadingScreen,children:(0,r.jsx)("div",{className:k().content,children:(0,r.jsxs)("div",{className:k().logo,children:[(0,r.jsx)("span",{className:k().text,children:"Зоопарк"}),(0,r.jsx)("span",{className:k().dot,children:"."})]})})})}function w(e){let{children:t}=e;return(0,r.jsx)(_.e,{children:(0,r.jsxs)(c.S,{children:[(0,r.jsx)(S,{}),(0,r.jsxs)(E,{children:[(0,r.jsx)(s.default,{}),t,(0,r.jsx)(h,{})]})]})})}},9732:(e,t,a)=>{"use strict";a.d(t,{_:()=>n,e:()=>o});var r=a(5155),_=a(2115);let c={email:"",date:null,paymentMethod:null},s=(0,_.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,_.useState)([]),[n,i]=(0,_.useState)(c),[l,d]=(0,_.useState)(!1),[m,h]=(0,_.useState)(1),[u,p]=(0,_.useState)(!1);(0,_.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("zoo-cart");if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(console.log("Загружены элементы корзины:",t.length),o(t))}}catch(e){console.error("Ошибка при загрузке корзины:",e),localStorage.removeItem("zoo-cart")}finally{p(!0)}})()},[]),(0,_.useEffect)(()=>{u&&(localStorage.setItem("zoo-cart",JSON.stringify(a)),console.log("Сохранено элементов в корзине:",a.length))},[a,u]);let x=a.reduce((e,t)=>e+t.quantity,0),f=a.reduce((e,t)=>e+t.ticket.price*t.quantity,0),j=e=>{console.log("Удаление из корзины ID:",e),o(t=>t.filter(t=>t.ticket.id!==e))},v=()=>{h(1),i(c)};return(0,r.jsx)(s.Provider,{value:{cartItems:a,orderInfo:n,isCartOpen:l,checkoutStep:m,addToCart:(e,t)=>{console.log("Добавление в корзину:",e.name,t),o(a=>{let r=a.findIndex(t=>t.ticket.id===e.id);if(-1===r)return[...a,{ticket:e,quantity:t}];{let e=[...a];return e[r].quantity+=t,e}}),d(!0)},removeFromCart:j,updateQuantity:(e,t)=>{if(console.log("Обновление количества ID:",e,"Новое количество:",t),t<=0)return void j(e);o(a=>a.map(a=>a.ticket.id===e?{...a,quantity:t}:a))},clearCart:()=>{console.log("Очистка корзины"),o([])},openCart:()=>{d(!0),console.log("Открытие корзины, элементов:",a.length)},closeCart:()=>{d(!1),setTimeout(()=>{m>1&&v()},300)},setOrderInfo:e=>{i(t=>({...t,...e}))},nextStep:()=>{h(e=>e+1)},prevStep:()=>{h(e=>Math.max(e-1,1))},resetCheckout:v,totalQuantity:x,totalPrice:f},children:t})},n=()=>{let e=(0,_.useContext)(s);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},9984:e=>{e.exports={footer:"Footer_footer__nMTH5",footer__container:"Footer_footer__container__LSQ4s",footer__grid:"Footer_footer__grid__UpKs8","footer__column-title":"Footer_footer__column-title__gDYo1","footer__column-text":"Footer_footer__column-text__cajJ8",footer__social:"Footer_footer__social__gxPfF","footer__social-link":"Footer_footer__social-link__LiMjF","footer__links-list":"Footer_footer__links-list__KKIjM","footer__links-item":"Footer_footer__links-item__7rM74","footer__hours-item":"Footer_footer__hours-item__AQTAg","footer__hours-note":"Footer_footer__hours-note__ivQlO","footer__contact-item":"Footer_footer__contact-item__ZYC1c","footer__contact-item-icon":"Footer_footer__contact-item-icon__x5cBv",footer__copyright:"Footer_footer__copyright__SsRmz"}}},e=>{var t=t=>e(e.s=t);e.O(0,[10,769,726,711,152,874,955,441,684,358],()=>t(7255)),_N_E=e.O()}]);