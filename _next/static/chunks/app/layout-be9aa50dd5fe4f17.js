(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1126:()=>{},1444:e=>{e.exports={cart__overlay:"CartModal_cart__overlay__DHjx1",cart__modal:"CartModal_cart__modal__wh8Ui",cart__modal_content:"CartModal_cart__modal_content__PdzQv",cart__header:"CartModal_cart__header__sUQBF",cart__header_icon:"CartModal_cart__header_icon__bIYYY",cart__title:"CartModal_cart__title__xv7tF",cart__steps:"CartModal_cart__steps__D_zLi",cart__step_indicator:"CartModal_cart__step_indicator__cjQnc",cart__step_indicator_active:"CartModal_cart__step_indicator_active__iBeYp",cart__step_number:"CartModal_cart__step_number__2cqrY",cart__close:"CartModal_cart__close__p171P",cart__content:"CartModal_cart__content__HoEuL",cart__content_success:"CartModal_cart__content_success__3L3BW",cart__step1:"CartModal_cart__step1__CEkY8",cart__items_list:"CartModal_cart__items_list__XQffm",cart__product_row:"CartModal_cart__product_row__TICvx",cart__product_icon:"CartModal_cart__product_icon__x7lDS",cart__product_info:"CartModal_cart__product_info__x6fM3",cart__product_name:"CartModal_cart__product_name__E6tji",cart__product_price:"CartModal_cart__product_price__bkJHh",cart__counter:"CartModal_cart__counter__iDfYy",cart__counter_btn:"CartModal_cart__counter_btn__8ttoe",cart__counter_value:"CartModal_cart__counter_value__jUtmr",cart__product_total:"CartModal_cart__product_total__pFbM5",cart__product_remove:"CartModal_cart__product_remove__YQB0A",cart__empty:"CartModal_cart__empty__xqFyT",cart__empty_icon:"CartModal_cart__empty_icon__2fToN",cart__empty_btn:"CartModal_cart__empty_btn__Gnk5h",cart__step2:"CartModal_cart__step2__rsiLL",cart__form_container:"CartModal_cart__form_container__L5P5K",cart__swipe_hint:"CartModal_cart__swipe_hint__ojHHx",cart__form_group:"CartModal_cart__form_group__P_1FG",cart__form_label:"CartModal_cart__form_label__LAJUh",cart__form_icon:"CartModal_cart__form_icon__j2YhL",cart__form_input:"CartModal_cart__form_input__oQuq_",cart__form_input_error:"CartModal_cart__form_input_error__3rO5B",cart__error_message:"CartModal_cart__error_message__GZA_7",cart__date_picker:"CartModal_cart__date_picker__xNEFh",cart__date_option:"CartModal_cart__date_option__t7KDZ",cart__date_option_selected:"CartModal_cart__date_option_selected__kFv1h",cart__date_option_disabled:"CartModal_cart__date_option_disabled__3Hqdj",cart__payment_methods:"CartModal_cart__payment_methods__us2XR",cart__payment_option:"CartModal_cart__payment_option__6vmkX",cart__payment_option_selected:"CartModal_cart__payment_option_selected___k2HO",cart__payment_icon:"CartModal_cart__payment_icon__8Uond",cart__step3:"CartModal_cart__step3__k35cS",cart__success_animation:"CartModal_cart__success_animation__Jj99r",cart__success_title:"CartModal_cart__success_title__GBHmt",cart__success_message:"CartModal_cart__success_message__Gtzxf",cart__success_btn:"CartModal_cart__success_btn__zZUkl",cart__footer:"CartModal_cart__footer__i972g",cart__back_btn:"CartModal_cart__back_btn__V4xie",cart__next_btn:"CartModal_cart__next_btn__CiXKO",cart__btn_icon:"CartModal_cart__btn_icon__G1UjZ"}},2038:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6554,23)),Promise.resolve().then(a.bind(a,9206)),Promise.resolve().then(a.bind(a,7436)),Promise.resolve().then(a.bind(a,7458)),Promise.resolve().then(a.t.bind(a,1126,23))},2724:e=>{e.exports={main:"MainLayout_main__SDHsE",hidden:"MainLayout_hidden__PoPnz"}},3738:e=>{e.exports={header:"Header_header__FHC0C","header--scrolled":"Header_header--scrolled___MJOt","header--transparent":"Header_header--transparent__VtNcN",header__container:"Header_header__container__lSRFK",header__logo:"Header_header__logo__doLJu","header__logo-accent":"Header_header__logo-accent__N2_IG",header__nav:"Header_header__nav__M_HYT","header__nav-list":"Header_header__nav-list__9vsSg","header__nav-item":"Header_header__nav-item__6sd5_","header__nav-item--scrolled":"Header_header__nav-item--scrolled__2iCr7","header__nav-item--transparent":"Header_header__nav-item--transparent__aI_r4","header__nav-item--active":"Header_header__nav-item--active__drVi2",header__cart:"Header_header__cart__lRdVq",header__cart_badge:"Header_header__cart_badge__XGVtR","header__mobile-button":"Header_header__mobile-button__Fbt7C","header__mobile-menu":"Header_header__mobile-menu__HDH95","header__mobile-list":"Header_header__mobile-list__9VDql","header__mobile-item":"Header_header__mobile-item__Xgdyc","header__mobile-item--active":"Header_header__mobile-item--active__a4j9W",header__mobile_cart_btn:"Header_header__mobile_cart_btn__P62wK",header__mobile_cart_icon:"Header_header__mobile_cart_icon__tUK2v",header__mobile_cart_badge:"Header_header__mobile_cart_badge__IrbPu",header__mobile_controls:"Header_header__mobile_controls__b8Nim"}},4094:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(5155),_=a(2115),o=a(7650),s=a(760),c=a(4105),n=a(4096),l=a.n(n);let i=e=>{let{isOpen:t,onClose:a,children:n,lockScroll:i=!0}=e,[d,m]=(0,_.useState)(!1),h=(0,_.useRef)(null);return((0,_.useEffect)(()=>(m(!0),i&&t&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[t,i]),(0,_.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()},r=e=>{h.current===e.target&&t&&a()};return document.addEventListener("keydown",e),document.addEventListener("mousedown",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("mousedown",r)}},[t,a]),d&&"undefined"!=typeof document)?(0,o.createPortal)((0,r.jsx)(s.N,{mode:"wait",children:t&&(0,r.jsxs)("div",{className:l().modalContainer,children:[(0,r.jsx)(c.P.div,{ref:h,className:l().overlay,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}}}),(0,r.jsx)(c.P.div,{className:l().modal,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,scale:.8,y:-20},visible:{opacity:1,scale:1,y:0,transition:{duration:.3}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.2}}},children:n})]})}),document.body):null}},4096:e=>{e.exports={modalContainer:"ModalPortal_modalContainer__rs2rm",overlay:"ModalPortal_overlay__lrZjt",modal:"ModalPortal_modal__3ss_v"}},5694:(e,t,a)=>{"use strict";a.d(t,{S:()=>s,s:()=>c});var r=a(5155),_=a(2115);let o=(0,_.createContext)({canAnimate:!1,isLoading:!0,hasScrolled:!1});function s(e){let{children:t}=e,[a,s]=(0,_.useState)(!0),[c,n]=(0,_.useState)(!1),[l,i]=(0,_.useState)(!1),d=(0,_.useRef)(!0);return(0,_.useEffect)(()=>{i(window.scrollY>0);let e=()=>{i(!0)};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[]),(0,_.useEffect)(()=>{if(d.current){d.current=!1;let e=setTimeout(()=>{s(!1),setTimeout(()=>{n(!0)},800)},2500);return()=>clearTimeout(e)}},[]),(0,r.jsx)(o.Provider,{value:{canAnimate:c,isLoading:a,hasScrolled:l},children:t})}function c(){let e=(0,_.useContext)(o);if(void 0===e)throw Error("useAnimation must be used within an AnimationProvider");return e}},7192:e=>{e.exports={loadingScreen:"LoadingScreen_loadingScreen__sB9qb",fadeOut:"LoadingScreen_fadeOut__TUJa2",content:"LoadingScreen_content__pLZQe",slideIn:"LoadingScreen_slideIn__65_dU",logo:"LoadingScreen_logo__L_DR1",text:"LoadingScreen_text__NW8oY",dot:"LoadingScreen_dot__ynpgN",pulse:"LoadingScreen_pulse__Z1_Ya",dots:"LoadingScreen_dots__gIrQx",bounce:"LoadingScreen_bounce__BWszj"}},7436:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var r=a(5155),_=a(2115),o=a(9911),s=a(3738),c=a.n(s),n=a(9732);let l=()=>{let[e,t]=(0,_.useState)("home"),a=(0,_.useCallback)(e=>{let t=document.getElementById(e);if(t){let e=document.querySelector("header"),a=e?e.offsetHeight:0,r=t.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:r-a,behavior:"smooth"})}},[]);return(0,_.useEffect)(()=>{let e=window.location.hash.slice(1);e&&(t(e),a(e))},[a]),(0,_.useEffect)(()=>{let a=()=>{let a="home",r=1/0;["home","animals","tickets","events","location"].forEach(e=>{let t=document.getElementById(e);if(t){let _=Math.abs(t.getBoundingClientRect().top);_<r&&(r=_,a=e)}}),a!==e&&(t(a),window.history.replaceState(null,"","#".concat(a)))};return window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[e]),{activeSection:e,handleNavigation:(0,_.useCallback)((e,r)=>{e.preventDefault(),t(r),a(r),window.history.pushState(null,"","#".concat(r))},[a])}},i=[{href:"#home",id:"home",label:"Главная"},{href:"#animals",id:"animals",label:"Животные"},{href:"#tickets",id:"tickets",label:"Билеты"},{href:"#events",id:"events",label:"События"},{href:"#location",id:"location",label:"Как добраться"}],d=()=>{let[e,t]=(0,_.useState)(!1),[a,s]=(0,_.useState)(!1),{cartItems:d,openCart:m}=(0,n._)(),h=d.reduce((e,t)=>e+t.quantity,0),{activeSection:u,handleNavigation:p}=l(),x=(0,_.useCallback)(()=>{t(window.scrollY>50)},[]);return(0,_.useEffect)(()=>(x(),window.addEventListener("scroll",x,{passive:!0}),()=>window.removeEventListener("scroll",x)),[x]),(0,r.jsx)("header",{className:"".concat(c().header," ").concat(e?c()["header--scrolled"]:c()["header--transparent"]),children:(0,r.jsxs)("div",{className:c().header__container,children:[(0,r.jsxs)("a",{href:"#home",onClick:e=>p(e,"home"),className:c().header__logo,children:["Зоопарк",(0,r.jsx)("span",{className:c()["header__logo-accent"],children:"."})]}),(0,r.jsx)("nav",{className:c().header__nav,children:(0,r.jsx)("ul",{className:c()["header__nav-list"],children:i.map(t=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:t.href,onClick:e=>{p(e,t.id),s(!1)},className:"\n                    ".concat(c()["header__nav-item"]," \n                    ").concat(e?c()["header__nav-item--scrolled"]:c()["header__nav-item--transparent"],"\n                    ").concat(u===t.id?c()["header__nav-item--active"]:"","\n                  "),children:t.label})},t.href))})}),(0,r.jsxs)("div",{className:c().header__mobile_controls,children:[(0,r.jsxs)("button",{className:c().header__cart,onClick:m,"aria-label":"Открыть корзину",children:[(0,r.jsx)(o.AsH,{}),h>0&&(0,r.jsx)("span",{className:c().header__cart_badge,children:h})]}),(0,r.jsx)("button",{className:c()["header__mobile-button"],onClick:()=>s(!a),"aria-label":a?"Закрыть меню":"Открыть меню",children:a?(0,r.jsx)(o.QCr,{}):(0,r.jsx)(o.OXb,{})})]}),a&&(0,r.jsx)("div",{className:c()["header__mobile-menu"],children:(0,r.jsxs)("ul",{className:c()["header__mobile-list"],children:[i.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.href,onClick:t=>{p(t,e.id),s(!1)},className:"\n                      ".concat(c()["header__mobile-item"],"\n                      ").concat(u===e.id?c()["header__mobile-item--active"]:"","\n                    "),children:e.label})},e.href)),(0,r.jsx)("li",{children:(0,r.jsxs)("button",{className:c().header__mobile_cart_btn,onClick:()=>{m(),s(!1)},children:[(0,r.jsx)(o.AsH,{className:c().header__mobile_cart_icon}),"Корзина",h>0&&(0,r.jsx)("span",{className:c().header__mobile_cart_badge,children:h})]})})]})})]})})}},7458:(e,t,a)=>{"use strict";a.d(t,{default:()=>O});var r=a(5155),_=a(9732),o=a(5694),s=a(7436),c=a(6874),n=a.n(c),l=a(2115),i=a(9911),d=a(4105),m=a(9984),h=a.n(m);let u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},p={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},x=[{href:"https://facebook.com",icon:i.iYk,label:"Facebook"},{href:"https://twitter.com",icon:i.feZ,label:"Twitter"},{href:"https://instagram.com",icon:i.ao$,label:"Instagram"},{href:"https://youtube.com",icon:i.Vk6,label:"YouTube"}],f=[{href:"/",label:"Главная"},{href:"/animals",label:"Животные"},{href:"/tickets",label:"Билеты"},{href:"/events",label:"События"},{href:"/location",label:"Как добраться"}],y=[{days:"Понедельник - Пятница",hours:"9:00 - 18:00"},{days:"Суббота",hours:"9:00 - 19:00"},{days:"Воскресенье",hours:"10:00 - 19:00"}],j=[{icon:i.vq8,text:"ул. Зоологическая, 123, г. Москва, 123456"},{icon:i.Cab,text:"+7 (123) 456-7890"},{icon:i.maD,text:"info@zoopark.ru"}],v=(0,l.memo)(()=>(0,r.jsx)("div",{className:h().footer__social,children:x.map(e=>{let{href:t,icon:a,label:_}=e;return(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":_,children:(0,r.jsx)(a,{className:h()["footer__social-link"]})},t)})}));v.displayName="SocialLinks";let b=(0,l.memo)(()=>(0,r.jsx)("ul",{className:h()["footer__links-list"],children:f.map(e=>{let{href:t,label:a}=e;return(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:t,className:h()["footer__links-item"],children:a})},t)})}));b.displayName="QuickLinks";let N=(0,l.memo)(()=>(0,r.jsxs)("ul",{children:[y.map(e=>{let{days:t,hours:a}=e;return(0,r.jsxs)("li",{className:h()["footer__hours-item"],children:[(0,r.jsxs)("span",{children:[t,":"]}),(0,r.jsx)("span",{children:a})]},t)}),(0,r.jsx)("li",{className:h()["footer__hours-note"],children:(0,r.jsx)("span",{children:"* Последний вход за 1 час до закрытия"})})]}));N.displayName="WorkingHours";let g=(0,l.memo)(()=>(0,r.jsx)("ul",{children:j.map(e=>{let{icon:t,text:a}=e;return(0,r.jsxs)("li",{className:h()["footer__contact-item"],children:[(0,r.jsx)(t,{className:h()["footer__contact-item-icon"]}),(0,r.jsx)("span",{children:a})]},a)})}));g.displayName="ContactInfo";let C=(0,l.memo)(()=>{let e=new Date().getFullYear();return(0,r.jsx)("footer",{className:h().footer,children:(0,r.jsxs)("div",{className:h().footer__container,children:[(0,r.jsxs)(d.P.div,{className:h().footer__grid,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:u,children:[(0,r.jsxs)(d.P.div,{variants:p,children:[(0,r.jsx)("h3",{className:h()["footer__column-title"],children:"Зоопарк"}),(0,r.jsx)("p",{className:h()["footer__column-text"],children:"Почувствуйте магию дикой природы в уникальной и интерактивной среде. Наша миссия - обучать, сохранять и вдохновлять."}),(0,r.jsx)(v,{})]}),(0,r.jsxs)(d.P.div,{variants:p,children:[(0,r.jsx)("h3",{className:h()["footer__column-title"],children:"Разделы"}),(0,r.jsx)(b,{})]}),(0,r.jsxs)(d.P.div,{variants:p,children:[(0,r.jsx)("h3",{className:h()["footer__column-title"],children:"Часы работы"}),(0,r.jsx)(N,{})]}),(0,r.jsxs)(d.P.div,{variants:p,children:[(0,r.jsx)("h3",{className:h()["footer__column-title"],children:"Контакты"}),(0,r.jsx)(g,{})]})]}),(0,r.jsx)(d.P.div,{className:h().footer__copyright,initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.5},children:(0,r.jsxs)("p",{children:["\xa9 ",e," Зоопарк. Все права защищены."]})})]})})});var E=a(2724),M=a.n(E),w=a(760),S=a(1444),k=a.n(S),D=a(9521),L=a(4094);let T={email:"",emailError:"",selectedDate:null,dateError:"",paymentMethod:null,paymentError:"",disabledDates:[]};function H(e,t){switch(t.type){case"SET_EMAIL":return{...e,email:t.payload,emailError:""};case"SET_EMAIL_ERROR":return{...e,emailError:t.payload};case"SET_SELECTED_DATE":return{...e,selectedDate:t.payload,dateError:""};case"SET_DATE_ERROR":return{...e,dateError:t.payload};case"SET_PAYMENT_METHOD":return{...e,paymentMethod:t.payload,paymentError:""};case"SET_PAYMENT_ERROR":return{...e,paymentError:t.payload};case"SET_DISABLED_DATES":return{...e,disabledDates:t.payload};case"RESET_FORM":return T;case"INITIALIZE_FORM":return{...e,...t.payload};default:return e}}let P=()=>{let{cartItems:e,orderInfo:t,isCartOpen:a,checkoutStep:o,removeFromCart:s,updateQuantity:c,closeCart:n,setOrderInfo:m,nextStep:h,prevStep:u,resetCheckout:p,totalPrice:x,clearCart:f}=(0,_._)(),[y,j]=(0,l.useReducer)(H,T),[v,b]=(0,l.useState)(window.innerWidth);(0,l.useEffect)(()=>{t&&j({type:"INITIALIZE_FORM",payload:{email:t.email||"",selectedDate:t.date,paymentMethod:t.paymentMethod}})},[t]),(0,l.useEffect)(()=>{console.log("CartModal: Количество элементов в корзине:",e.length),console.log("CartModal: Общая сумма:",x)},[e,x,a]),(0,l.useEffect)(()=>{let e=new Date,t=new Date(e);t.setDate(e.getDate()+14);let a=[],r=new Date(t);for(let e=0;e<30;e++)r.setDate(r.getDate()+1),a.push(new Date(r));j({type:"SET_DISABLED_DATES",payload:a})},[]),(0,l.useEffect)(()=>{let e=()=>{b(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let N=e=>{j({type:"SET_SELECTED_DATE",payload:e})},g=e=>{j({type:"SET_PAYMENT_METHOD",payload:e})},C=e=>e.toLocaleDateString("ru-RU",{day:"numeric",month:"long",weekday:"short"}),E=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(e),M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},S={enter:e=>{let t=v<=768;return{x:t?0:e>0?"100%":"-100%",opacity:.2,scale:.95,rotateY:t?0:e>0?"7deg":"-7deg"}},center:{x:0,opacity:1,scale:1,rotateY:0,transition:{type:"tween",duration:.4,ease:[.16,1,.3,1]}},exit:e=>{let t=v<=768;return{x:t?0:e<0?"100%":"-100%",opacity:.2,scale:.95,rotateY:t?0:e<0?"7deg":"-7deg",transition:{type:"tween",duration:.4,ease:[.16,1,.3,1]}}}},P=()=>o<F.current?-1:1,F=(0,l.useRef)(o);(0,l.useEffect)(()=>{F.current=o},[o]);let I=e=>{switch(e){case"user":return(0,r.jsx)(i.x$1,{});case"child":return(0,r.jsx)(i.U6x,{});case"userTie":return(0,r.jsx)(i.p7b,{});default:return(0,r.jsx)(i.tVd,{})}};return(0,r.jsxs)(L.A,{isOpen:a,onClose:n,children:[(0,r.jsx)("div",{className:k().cart__overlay,onClick:n}),(0,r.jsx)("div",{className:k().cart__modal,children:(0,r.jsxs)("div",{className:k().cart__modal_content,children:[(0,r.jsxs)("div",{className:k().cart__header,children:[1===o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.AsH,{className:k().cart__header_icon}),(0,r.jsx)("h2",{className:k().cart__title,children:"Корзина"})]}),2===o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.bfZ,{className:k().cart__header_icon}),(0,r.jsx)("h2",{className:k().cart__title,children:"Оформление заказа"})]}),3===o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.CMH,{className:k().cart__header_icon}),(0,r.jsx)("h2",{className:k().cart__title,children:"Заказ оформлен"})]}),(0,r.jsx)("div",{className:k().cart__steps,children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"".concat(k().cart__step_indicator," ").concat(o>=e?k().cart__step_indicator_active:""),children:[(0,r.jsx)("span",{className:k().cart__step_number,children:e}),(0,r.jsx)("span",{className:k().cart__step_name,children:1===e?"Корзина":2===e?"Оформление":"Готово"})]},e))}),(0,r.jsx)("button",{className:k().cart__close,onClick:n,children:(0,r.jsx)(i.QCr,{})})]}),(0,r.jsx)("div",{className:"".concat(k().cart__content," ").concat(3===o?k().cart__content_success:""),children:(0,r.jsxs)(w.N,{mode:"wait",initial:!1,children:[1===o&&(0,r.jsx)(d.P.div,{className:k().cart__step1,initial:"enter",animate:"center",exit:"exit",variants:S,custom:P(),children:e&&e.length>0?(0,r.jsx)("div",{className:k().cart__items_list,children:e.map(e=>(0,r.jsxs)("div",{className:k().cart__product_row,children:[(0,r.jsx)("div",{className:k().cart__product_icon,children:I(e.iconType)}),(0,r.jsxs)("div",{className:k().cart__product_info,children:[(0,r.jsx)("div",{className:k().cart__product_name,children:e.name}),(0,r.jsxs)("div",{className:k().cart__product_price,children:[E(e.price)," / шт."]})]}),(0,r.jsxs)("div",{className:k().cart__counter,children:[(0,r.jsx)("button",{className:k().cart__counter_btn,onClick:()=>c(e.id,e.quantity-1),"aria-label":"Уменьшить количество",children:"-"}),(0,r.jsx)("div",{className:k().cart__counter_value,children:e.quantity}),(0,r.jsx)("button",{className:k().cart__counter_btn,onClick:()=>c(e.id,e.quantity+1),"aria-label":"Увеличить количество",children:"+"})]}),(0,r.jsx)("div",{className:k().cart__product_total,children:E(e.price*e.quantity)}),(0,r.jsx)("button",{className:k().cart__product_remove,onClick:()=>s(e.id),"aria-label":"Удалить из корзины",children:(0,r.jsx)(i.qbC,{})})]},e.id))}):(0,r.jsxs)("div",{className:k().cart__empty,children:[(0,r.jsx)(i.AsH,{className:k().cart__empty_icon}),(0,r.jsx)("p",{children:"Ваша корзина пуста"}),(0,r.jsx)("button",{className:k().cart__empty_btn,onClick:n,children:"Продолжить покупки"})]})},"cart-step"),2===o&&(0,r.jsx)(d.P.div,{className:k().cart__step2,initial:"enter",animate:"center",exit:"exit",variants:S,custom:P(),children:(0,r.jsxs)(d.P.div,{className:k().cart__form_container,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},children:[(0,r.jsxs)(d.P.div,{className:k().cart__form_group,variants:M,children:[(0,r.jsxs)("label",{htmlFor:"email",className:k().cart__form_label,children:[(0,r.jsx)(i.maD,{className:k().cart__form_icon})," Email для получения билетов"]}),(0,r.jsx)("input",{id:"email",type:"email",className:"".concat(k().cart__form_input," ").concat(y.emailError?k().cart__form_input_error:""),placeholder:"example@example.com",value:y.email,onChange:e=>{j({type:"SET_EMAIL",payload:e.target.value})}}),y.emailError&&(0,r.jsx)("p",{className:k().cart__error_message,children:y.emailError})]}),(0,r.jsxs)(d.P.div,{className:k().cart__form_group,variants:M,children:[(0,r.jsxs)("label",{className:k().cart__form_label,children:[(0,r.jsx)(i.bfZ,{className:k().cart__form_icon})," Дата посещения (в течение двух недель)"]}),(0,r.jsxs)("div",{className:k().cart__date_picker,children:[(()=>{let e=[],t=new Date;for(let a=1;a<=14;a++){let r=new Date(t);r.setDate(t.getDate()+a),e.push(r)}return e})().map(e=>(0,r.jsx)("button",{type:"button",className:"".concat(k().cart__date_option," ").concat(y.selectedDate&&e.toDateString()===y.selectedDate.toDateString()?k().cart__date_option_selected:""),onClick:()=>N(e),children:C(e)},e.toISOString())),y.disabledDates.slice(0,5).map(e=>(0,r.jsx)("button",{type:"button",className:"".concat(k().cart__date_option," ").concat(k().cart__date_option_disabled),disabled:!0,children:C(e)},e.toISOString()))]}),y.dateError&&(0,r.jsx)("p",{className:k().cart__error_message,children:y.dateError})]}),(0,r.jsxs)(d.P.div,{className:k().cart__form_group,variants:M,children:[(0,r.jsxs)("label",{className:k().cart__form_label,children:[(0,r.jsx)(i.MxO,{className:k().cart__form_icon})," Способ оплаты"]}),(0,r.jsxs)("div",{className:k().cart__payment_methods,children:[(0,r.jsxs)("button",{type:"button",className:"".concat(k().cart__payment_option," ").concat("card"===y.paymentMethod?k().cart__payment_option_selected:""),onClick:()=>g("card"),children:[(0,r.jsx)(i.x1c,{className:k().cart__payment_icon}),(0,r.jsx)("span",{children:"Банковская карта"})]}),(0,r.jsxs)("button",{type:"button",className:"".concat(k().cart__payment_option," ").concat("paypal"===y.paymentMethod?k().cart__payment_option_selected:""),onClick:()=>g("paypal"),children:[(0,r.jsx)(i.SnG,{className:k().cart__payment_icon}),(0,r.jsx)("span",{children:"PayPal"})]}),(0,r.jsxs)("button",{type:"button",className:"".concat(k().cart__payment_option," ").concat("applepay"===y.paymentMethod?k().cart__payment_option_selected:""),onClick:()=>g("applepay"),children:[(0,r.jsx)(i.eMv,{className:k().cart__payment_icon}),(0,r.jsx)("span",{children:"Apple Pay"})]})]}),y.paymentError&&(0,r.jsx)("p",{className:k().cart__error_message,children:y.paymentError})]})]})},"checkout-step"),3===o&&(0,r.jsxs)(d.P.div,{className:k().cart__step3,initial:"enter",animate:"center",exit:"exit",variants:S,custom:P(),children:[(0,r.jsx)("div",{className:k().cart__success_animation,children:(0,r.jsx)(D.Ii,{src:"/monkey.lottie",autoplay:!0,loop:!0})}),(0,r.jsx)("h3",{className:k().cart__success_title,children:"Спасибо за покупку!"}),(0,r.jsxs)("p",{className:k().cart__success_message,children:["Ваши билеты направлены на указанную почту ",(0,r.jsx)("strong",{children:y.email}),". Ждем вас!"]}),(0,r.jsxs)("button",{className:k().cart__success_btn,onClick:()=>{f(),setTimeout(()=>{n(),p(),j({type:"RESET_FORM"})},3e3)},children:[(0,r.jsx)(i.CMH,{}),"Готово"]})]},"success-step")]})}),(0,r.jsx)("div",{className:k().cart__footer,children:o<3&&(0,r.jsxs)(r.Fragment,{children:[o>1&&(0,r.jsxs)("button",{className:k().cart__back_btn,onClick:u,children:[(0,r.jsx)(i.QVr,{className:k().cart__btn_icon}),"Назад"]}),(0,r.jsxs)("button",{className:k().cart__next_btn,onClick:()=>{if(1===o)0!==e.length&&h();else if(2===o){let e=!1;if(y.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)||(j({type:"SET_EMAIL_ERROR",payload:"Пожалуйста, введите корректный email"}),e=!0),y.selectedDate||(j({type:"SET_DATE_ERROR",payload:"Пожалуйста, выберите дату посещения"}),e=!0),y.paymentMethod||(j({type:"SET_PAYMENT_ERROR",payload:"Пожалуйста, выберите способ оплаты"}),e=!0),e)return;m({email:y.email,date:y.selectedDate,paymentMethod:y.paymentMethod}),h()}},disabled:0===e.length&&1===o,children:[1===o?"Оформить заказ":"Оплатить",(0,r.jsx)(i.Z0P,{className:k().cart__btn_icon})]})]})})]})})]})},F=(0,l.memo)(e=>{let{children:t}=e,{isLoading:a}=(0,o.s)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("main",{className:"".concat(M().main," ").concat(a?M().hidden:""),children:t}),(0,r.jsx)(P,{})]})});var I=a(7192),R=a.n(I);let A=(0,l.memo)(()=>{let e=(0,l.useRef)(null),{isLoading:t}=(0,o.s)();return(0,l.useEffect)(()=>{if(document.body.style.opacity="1",!t&&e.current){e.current.classList.add(R().fadeOut);let t=setTimeout(()=>{var t;null==(t=e.current)||t.remove()},800);return()=>clearTimeout(t)}},[t]),(0,r.jsx)("div",{ref:e,className:R().loadingScreen,children:(0,r.jsx)("div",{className:R().content,children:(0,r.jsxs)("div",{className:R().logo,children:[(0,r.jsx)("span",{className:R().text,children:"Зоопарк"}),(0,r.jsx)("span",{className:R().dot,children:"."})]})})})});function O(e){let{children:t}=e;return(0,r.jsx)(_.e,{children:(0,r.jsxs)(o.S,{children:[(0,r.jsx)(A,{}),(0,r.jsxs)(F,{children:[(0,r.jsx)(s.default,{}),t,(0,r.jsx)(C,{})]})]})})}},9206:(e,t,a)=>{"use strict";a.d(t,{default:()=>_});var r=a(5155);let _=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com",crossOrigin:"anonymous"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,r.jsx)("link",{rel:"preload",as:"style",href:"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap",rel:"stylesheet",media:"print",onLoad:e=>{e.target.media="all"}})]})},9732:(e,t,a)=>{"use strict";a.d(t,{_:()=>n,e:()=>c});var r=a(5155),_=a(2115);let o={email:"",date:null,paymentMethod:null},s=(0,_.createContext)(null),c=e=>{let{children:t}=e,[a,c]=(0,_.useState)([]),[n,l]=(0,_.useState)(o),[i,d]=(0,_.useState)(!1),[m,h]=(0,_.useState)(1),[u,p]=(0,_.useState)(!1);(0,_.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("cart");if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(console.log("Загружены элементы корзины:",t.length),c(t))}}catch(e){console.error("Ошибка при загрузке корзины:",e),localStorage.removeItem("cart")}finally{p(!0)}})()},[]),(0,_.useEffect)(()=>{u&&a.length>0&&(localStorage.setItem("cart",JSON.stringify(a)),console.log("Сохранено элементов в корзине:",a.length))},[a,u]);let x=a.reduce((e,t)=>e+t.price*t.quantity,0),f=()=>{h(1),l(o)};return(0,r.jsx)(s.Provider,{value:{cartItems:a,isCartOpen:i,checkoutStep:m,addToCart:e=>{console.log("Добавление в корзину:",e.name,e.quantity),c(t=>{let a=t.findIndex(t=>t.id===e.id);if(-1===a)return[...t,e];{let r=[...t],_=r[a];return r[a]={..._,quantity:_.quantity+e.quantity},r}}),d(!0)},removeFromCart:e=>{console.log("Удаление из корзины ID:",e),c(t=>t.filter(t=>t.id!==e))},updateQuantity:(e,t)=>{t>0&&c(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{console.log("Очистка корзины"),c([]),localStorage.removeItem("cart")},openCart:()=>{d(!0),console.log("Открытие корзины, элементов:",a.length)},closeCart:()=>{d(!1),setTimeout(()=>{m>1&&f()},300)},nextStep:()=>{h(e=>Math.min(e+1,3))},prevStep:()=>{h(e=>Math.max(e-1,1))},resetCheckout:f,totalAmount:x,orderInfo:n,setOrderInfo:e=>{l(t=>({...t,...e}))},totalPrice:x},children:t})},n=()=>{let e=(0,_.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},9984:e=>{e.exports={footer:"Footer_footer__nMTH5",footer__container:"Footer_footer__container__LSQ4s",footer__grid:"Footer_footer__grid__UpKs8","footer__column-title":"Footer_footer__column-title__gDYo1","footer__column-text":"Footer_footer__column-text__cajJ8",footer__social:"Footer_footer__social__gxPfF","footer__social-link":"Footer_footer__social-link__LiMjF","footer__links-list":"Footer_footer__links-list__KKIjM","footer__links-item":"Footer_footer__links-item__7rM74","footer__hours-item":"Footer_footer__hours-item__AQTAg","footer__hours-note":"Footer_footer__hours-note__ivQlO","footer__contact-item":"Footer_footer__contact-item__ZYC1c","footer__contact-item-icon":"Footer_footer__contact-item-icon__x5cBv",footer__copyright:"Footer_footer__copyright__SsRmz"}}},e=>{var t=t=>e(e.s=t);e.O(0,[925,769,726,711,152,874,818,441,684,358],()=>t(2038)),_N_E=e.O()}]);